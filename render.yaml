services:
  # Spring Boot 웹 서비스
  - type: web
    name: apiproj-web
    runtime: docker
    dockerfilePath: ./Dockerfile
    dockerContext: .
    plan: free  # 또는 starter, standard 등 원하는 플랜
    envVars:
      # 데이터베이스 연결 정보 (Render DB 서비스 사용 시)
      # 외부 DB를 사용하는 경우 아래 환경 변수를 Render 대시보드에서 직접 설정하세요
      - key: SPRING_DATASOURCE_URL
        sync: false  # false로 설정하여 수동 입력 가능하게 함
        # 예: jdbc:mariadb://dbserver.example.com:3306/allDB
        # 또는 Render DB 서비스 사용 시: jdbc:mariadb://${db.host}:${db.port}/${db.database}
      - key: SPRING_DATASOURCE_USERNAME
        sync: false
        # 예: root
      - key: SPRING_DATASOURCE_PASSWORD
        sync: false
        # 예: your-password
      - key: SPRING_DATASOURCE_DRIVER_CLASS_NAME
        value: org.mariadb.jdbc.Driver
      
      # 타임존 설정
      - key: TZ
        value: Asia/Seoul
      
      # 아임포트 결제 설정 (선택사항 - 결제 기능 사용 시 필요)
      # IamportConfig는 다음 형식으로 환경 변수를 읽습니다:
      # IAMPORT_IMP_CODE -> iamport.imp.code
      # IAMPORT_API_KEY -> iamport.api.key
      # IAMPORT_API_SECRET -> iamport.api.secret
      # IAMPORT_CALLBACK_URL -> iamport.callback.url
      - key: IAMPORT_IMP_CODE
        sync: false
        # 예: imp12345678
      - key: IAMPORT_API_KEY
        sync: false
        # 예: your-api-key
      - key: IAMPORT_API_SECRET
        sync: false
        # 예: your-api-secret
      - key: IAMPORT_CALLBACK_URL
        sync: false
        # 예: https://your-app.onrender.com/payment/callback
      
      # 온비드 API 키 (선택사항 - API 기능 사용 시 필요)
      - key: ONBID_SERVICE_KEY
        sync: false
        # 예: 4a9c9dde8ae2c662f5d7bc484c937ff43129743101222fe93d3a54bc264377e8
      
      # 포트 설정 (Render가 자동으로 설정하지만 명시적으로 지정 가능)
      - key: PORT
        value: 8080
      
      # 로깅 레벨
      - key: LOGGING_LEVEL_ROOT
        value: INFO
    healthCheckPath: /
    
  # MariaDB 데이터베이스 서비스 (선택사항 - Render에서 DB를 생성하는 경우)
  # 외부 DB를 사용하는 경우 아래 섹션을 제거하세요
  # - type: pspg
  #   name: apiproj-db
  #   plan: free  # 또는 starter, standard 등
  #   databaseName: allDB
  #   user: admin

